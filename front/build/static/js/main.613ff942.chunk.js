(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{171:function(e,t,n){e.exports=n(352)},176:function(e,t,n){},177:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(164),o=n.n(c),i=(n(176),n(1)),l=n(24);n(177),n(178);function u(){return r.a.createElement("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",href:"/#"},"Cycle-hunter 9000")))}var s,m=n(33),h=n.n(m);function d(e){return e.data}!function(e){e.D3="D3",e.CYTOSCAPE="Cytoscape",e.VIS="Vis.js"}(s||(s={}));var g=n(165),f={automaticRearrangeAfterDropNode:!0,collapsible:!0,directed:!0,focusAnimationDuration:0,focusZoom:1,height:800,highlightDegree:2,highlightOpacity:1,linkHighlightBehavior:!0,maxZoom:8,minZoom:.1,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,staticGraphWithDragAndDrop:!1,width:1500,d3:{alphaTarget:.05,gravity:-200,linkLength:300,linkStrength:1,disableLinkForce:!1},node:{color:"grey",fontColor:"black",fontSize:15,fontWeight:"normal",highlightColor:"orange",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:100,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle"},link:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"black",highlightFontSize:8,highlightFontWeight:"normal",labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!1,semanticStrokeWidth:!1,strokeWidth:2,markerHeight:3,markerWidth:3}},p=n(167),y=n.n(p),v={physics:{enabled:!1,repulsion:{nodeDistance:500}},layout:{improvedLayout:!0},edges:{color:"#000000"},height:"500px"};function k(e){var t,n={select:function(t){if(t.event.preventDefault(),1===t.edges.length){var n=t.edges[0].split(";"),a=Object(l.a)(n,2),r=a[0],c=a[1];e.onLinkClick(r,c)}}};return r.a.createElement(y.a,{key:JSON.stringify(e.data),graph:(t=e.data,{nodes:t.nodes.map((function(e){return{id:e.id,label:e.id,title:e.id}})),edges:t.links.map((function(e){return{id:"".concat(e.source,";").concat(e.target),from:e.source,to:e.target}}))}),options:v,events:n})}var b,E=n(88),C=n.n(E),O=n(168),N=n.n(O),j=[{selector:"node",style:{"transition-duration":"0.3s",label:"data(id)","font-weight":"bold","transition-timing-function":"ease-in-sine","background-color":"orange"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","target-arrow-color":"purple","line-color":"lightblue"}}];function S(e){var t=Object(a.useState)({layout:b.GRID}),n=Object(l.a)(t,2),r=n[0],c=n[1],o=a.useRef(null),u=a.useRef(),s=a.useRef(),m=e.data,h=e.onLinkClick,d=function(e){var t=e.links.map((function(e){return{group:"edges",data:{id:"edge-".concat(e.source,"-").concat(e.target),source:e.source,target:e.target}}})),n=e.nodes.map((function(e){return{group:"nodes",data:e}}));return t.concat(n)}(m);a.useEffect((function(){u.current&&(s.current&&s.current.stop(),u.current.remove("node, edge"),u.current.add(d),s.current=u.current.elements().makeLayout({name:r.layout,spacingFactor:2}),s.current.run())}),[m,r.layout]),a.useEffect((function(){var e,t;o.current&&(u.current||(C.a.use(N.a),u.current=C()({style:j,elements:d,maxZoom:1,wheelSensitivity:.2,container:o.current})),null===(e=u.current)||void 0===e||e.off("click","edge"),null===(t=u.current)||void 0===t||t.on("click","edge",(function(e){var t=e.target._private.data;h(t.source,t.target)})))}),[m,h]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"select"},a.createElement("select",{value:r.layout,onChange:function(e){return function(e){c((function(t){return Object(i.a)(Object(i.a)({},t),{},{layout:e})}))}(e.target.value)}},Object.values(b).map((function(e){return a.createElement("option",{key:e},e)})))),a.createElement("div",{className:"graph",ref:o}))}function w(e){var t=function(){if(0!==e.data.nodes.length)switch(e.graphType){case s.CYTOSCAPE:return r.a.createElement(S,{onLinkClick:e.onLinkClick,data:e.data});case s.VIS:return r.a.createElement(k,{data:e.data,onLinkClick:e.onLinkClick});case s.D3:return r.a.createElement(g.Graph,{id:"cycle-graph",data:e.data,config:f,onClickLink:e.onLinkClick})}}();return r.a.createElement("div",{style:{border:"black",borderWidth:1,borderStyle:"dashed"}},t)}!function(e){e.GRID="grid",e.CONCENTRIC="concentric",e.CIRCLE="circle"}(b||(b={}));var D=function(){var e=Object(a.useState)({cycles:[],graphData:{nodes:[],links:[]},description:[],show_only_new_cycles:!1,graphType:s.VIS}),t=Object(l.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){h.a.get("/cycles").then(d).then((function(e){return c((function(t){return Object(i.a)(Object(i.a)({},t),{},{cycles:e})}))}))}),[]);var o,m,g=function(e){return{nodes:e.map((function(e){return{id:e.name}})),links:e.flatMap((function(e){return e.uses.map((function(t){return{source:e.name,target:t}}))}))}},f=function(e){var t;(t=e,h.a.get("/cycle/".concat(t)).then(d)).then(g).then((function(e){return c((function(t){return Object(i.a)(Object(i.a)({},t),{},{graphData:e})}))}))},p=function(){h.a.get("/graph").then(d).then(g).then((function(e){return c((function(t){return Object(i.a)(Object(i.a)({},t),{},{graphData:e})}))}))};return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"columns is-marginless"},r.a.createElement("div",{className:"column is-one-fifth"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:n.graphType,onChange:function(e){return t=e.target.value,void c((function(e){return Object(i.a)(Object(i.a)({},e),{},{graphType:t,description:[]})}));var t}},Object.values(s).map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"checkbox",checked:n.show_only_new_cycles,onChange:function(e){c((function(e){return Object(i.a)(Object(i.a)({},e),{},{show_only_new_cycles:!e.show_only_new_cycles})}))}}),r.a.createElement("label",null,"Show only new cycles")),r.a.createElement("div",{className:"list"},r.a.createElement("a",{key:"complete-graph",href:"/#",className:"list-item",onClick:function(e){return p()}},"Complete dependency graph"),(o=n.cycles,m=n.show_only_new_cycles,o.filter((function(e){return!m||e.new_cycle})).map((function(e){return r.a.createElement("a",{key:e.id,href:"/#",className:"list-item",onClick:function(t){return f(e.id)}},e.packages.length," item cycle")}))))),r.a.createElement("div",{className:"column"},r.a.createElement(w,{graphType:n.graphType,data:n.graphData,onLinkClick:function(e,t){var a=(void 0===n.graphData.links.find((function(n){return n.source===t&&n.target===e}))?[[e,t]]:[[t,e],[e,t]]).map((function(e){return t=e[0],n=e[1],h.a.get("/imports/".concat(t,"/").concat(n)).then(d);var t,n}));Promise.all(a).then((function(e){return c((function(t){return Object(i.a)(Object(i.a)({},t),{},{description:e.map((function(e){return{from:e.from,to:e.to,imports:e.imports}}))})}))}))}}))),r.a.createElement("div",{className:"columns",style:{marginLeft:"auto"}},n.description.map((function(e){return r.a.createElement("div",{key:e.from,className:"column"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"has-text-centered"},"".concat(e.to," imports in ").concat(e.from)))),r.a.createElement("tbody",null,e.imports.map((function(e){return r.a.createElement("tr",{key:e,className:"has-text-left"},r.a.createElement("td",null,e))})))))})))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.613ff942.chunk.js.map